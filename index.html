<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DeltaMath Vokasi - SMKN Pasirian</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Import Map untuk React & Lucide -->
    <script type="importmap">
    {
        "imports": {
            "react": "https://esm.sh/react@18.2.0",
            "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
            "lucide-react": "https://esm.sh/lucide-react@0.263.1"
        }
    }
    </script>
    
    <!-- Babel untuk JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        /* Custom Styles */
        body { margin: 0; padding: 0; background-color: #020617; }
        .hide-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .hide-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(5px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fadeIn {
            animation: fadeIn 0.5s ease-out forwards;
        }
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        .animate-spin {
            animation: spin 1s linear infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: .5; }
        }
        .animate-pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        @keyframes bounce-slow {
            0%, 100% { transform: translateY(-5%); }
            50% { transform: translateY(5%); }
        }
        .animate-bounce-slow {
            animation: bounce-slow 3s infinite ease-in-out;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel" data-type="module">
        import React, { useState, useEffect } from 'react';
        import { createRoot } from 'react-dom/client';
        import { 
            BookOpen, Compass, Rocket, Repeat, BarChart2, Play, 
            ChevronRight, Menu, User, Award, Terminal, Wifi, 
            Ruler, LogIn, Sparkles, X as CloseIcon, MessageSquare, 
            LogOut, Settings, ChevronDown, LayoutGrid, LayoutList, 
            Clock, CheckCircle2, MoreHorizontal, Globe, Lock, 
            FileText, Video, HelpCircle, Bell, GraduationCap, Mail, Phone, Calendar,
            Megaphone, AlertCircle, Pin, CalendarDays, Map
        } from 'lucide-react';

        const App = () => {
            const [isLoggedIn, setIsLoggedIn] = useState(false);
            const [userName, setUserName] = useState('');
            const [userClass, setUserClass] = useState('X TKJ A');
            
            const [activeTab, setActiveTab] = useState('dashboard');
            const [viewMode, setViewMode] = useState('stream'); 
            const [selectedMajor, setSelectedMajor] = useState('TKJ'); 
            const [selectedLevel, setSelectedLevel] = useState('X'); 
            const [selectedTopic, setSelectedTopic] = useState(''); 
            const [activeDeltaStage, setActiveDeltaStage] = useState('Launch'); 

            // AI States
            const [showAIModal, setShowAIModal] = useState(false);
            const [aiLoading, setAiLoading] = useState(false);
            const [aiResponse, setAiResponse] = useState('');
            const [aiPromptType, setAiPromptType] = useState(''); 

            // Activity Content Modal States
            const [showActivityModal, setShowActivityModal] = useState(false);
            const [activityContent, setActivityContent] = useState(null);

            // Admin Board States
            const [showAdminModal, setShowAdminModal] = useState(false);
            const [adminPassword, setAdminPassword] = useState('');
            const [adminError, setAdminError] = useState('');

            // Tour Guide States
            const [isTourActive, setIsTourActive] = useState(false);
            const [tourStep, setTourStep] = useState(0);

            const apiKey = "AIzaSyAS46ALiEZuE6hV3WT5qPu2IEHYZNHJyUU"; 

            // --- DATABASE SILABUS ---
            const syllabus = {
                X: [
                    "Eksponen & Pangkat Pecahan",
                    "SP & PtLDV",
                    "Fungsi Kuadrat",
                    "Persamaan & Fungsi Eksponensial",
                    "Trigonometri",
                    "Statistika",
                    "Peluang"
                ],
                SENIOR: [
                    "Barisan & Deret",
                    "Anuitas & Investasi",
                    "Komposisi & Invers Fungsi",
                    "Transformasi Fungsi",
                    "Lingkaran",
                    "Statistika Lanjut",
                    "Peluang Lanjutan"
                ]
            };

            // --- DATABASE KONTEN ---
            const contentDatabase = {
                X: {
                    "Eksponen & Pangkat Pecahan": {
                        RPL: {
                            title: "Eksponen & Biner", context: "Optimasi Memori & Big Data",
                            task: "Hitung efisiensi penyimpanan data biner (bit/byte) menggunakan sifat eksponensial.",
                            img: "https://images.unsplash.com/photo-1555066931-4365d14bab8c?auto=format&fit=crop&q=80&w=800"
                        },
                        TKJ: {
                            title: "Eksponen Jaringan", context: "Subnetting & IP Address",
                            task: "Hitung jumlah host maksimum dalam jaringan menggunakan perpangkatan basis 2.",
                            img: "https://images.unsplash.com/photo-1558494949-ef526b0042a0?auto=format&fit=crop&q=80&w=800"
                        },
                        DPIB: {
                            title: "Eksponen Struktur", context: "Kekuatan Material",
                            task: "Hitung peluruhan kekuatan beton atau pertumbuhan bakteri pada instalasi limbah.",
                            img: "https://images.unsplash.com/photo-1503387762-592deb58ef4e?auto=format&fit=crop&q=80&w=800"
                        }
                    },
                    "Trigonometri": {
                        RPL: {
                            title: "Trigonometri Game", context: "Pengembangan Game 2D",
                            task: "Tentukan arah peluru (vektor) berdasarkan sudut tembakan menggunakan Sin/Cos.",
                            img: "https://images.unsplash.com/photo-1556438064-2d7646166914?auto=format&fit=crop&q=80&w=800"
                        },
                        TKJ: {
                            title: "Trigonometri Sinyal", context: "Antena & Jangkauan WiFi",
                            task: "Hitung ketinggian tower antena agar sinyal menjangkau area radius 2km (Sudut Elevasi).",
                            img: "https://images.unsplash.com/photo-1544197150-b99a580bbcbf?auto=format&fit=crop&q=80&w=800"
                        },
                        DPIB: {
                            title: "Trigonometri Konstruksi", context: "Pengukuran Lahan (Theodolite)",
                            task: "Hitung kemiringan atap atau tinggi gedung menggunakan perbandingan trigonometri.",
                            img: "https://images.unsplash.com/photo-1503387762-592deb58ef4e?auto=format&fit=crop&q=80&w=800"
                        }
                    },
                    "Fungsi Kuadrat": {
                         RPL: {
                            title: "Fungsi Kuadrat Game", context: "Fisika Game (Projectile)",
                            task: "Buat persamaan parabola untuk lintasan lompatan karakter dalam game platformer.",
                            img: "https://images.unsplash.com/photo-1556438064-2d7646166914?auto=format&fit=crop&q=80&w=800"
                        },
                        TKJ: {
                            title: "Optimasi Jaringan", context: "Load Balancing",
                            task: "Analisis kurva beban server untuk menemukan titik puncak traffic menggunakan fungsi kuadrat.",
                            img: "https://images.unsplash.com/photo-1544197150-b99a580bbcbf?auto=format&fit=crop&q=80&w=800"
                        },
                        DPIB: {
                            title: "Lengkung Jembatan", context: "Desain Jembatan",
                            task: "Hitung beban maksimal pada titik puncak lengkungan jembatan gantung.",
                            img: "https://images.unsplash.com/photo-1513002749550-c59d786b8e6c?auto=format&fit=crop&q=80&w=800"
                        }
                    }
                },
                SENIOR: {
                    "Transformasi Fungsi": {
                        RPL: {
                            title: "Transformasi Game", context: "Computer Graphics",
                            task: "Buat matriks rotasi untuk memutar objek karakter game sebesar 90 derajat.",
                            img: "https://images.unsplash.com/photo-1614741118868-9c7c9da96307?auto=format&fit=crop&q=80&w=800"
                        },
                        TKJ: {
                            title: "Transformasi Sinyal", context: "Pengolahan Sinyal",
                            task: "Analisis pergeseran fasa gelombang sinyal (translasi grafik).",
                            img: "https://images.unsplash.com/photo-1550751827-4bd374c3f58b?auto=format&fit=crop&q=80&w=800"
                        },
                        DPIB: {
                            title: "Transformasi CAD", context: "Desain Arsitektur (AutoCAD)",
                            task: "Pindahkan denah bangunan (Translasi) dan perbesar skala (Dilatasi) pada koordinat.",
                            img: "https://images.unsplash.com/photo-1503387762-592deb58ef4e?auto=format&fit=crop&q=80&w=800"
                        }
                    },
                    "Anuitas & Investasi": {
                        RPL: {
                            title: "Fintech System", context: "Aplikasi Keuangan",
                            task: "Buat algoritma untuk menghitung cicilan bulanan (anuitas) pada aplikasi pinjol simulasi.",
                            img: "https://images.unsplash.com/photo-1563986768-7b06d938b39d?auto=format&fit=crop&q=80&w=800"
                        },
                        TKJ: {
                            title: "Investasi Perangkat", context: "Pengadaan Server",
                            task: "Hitung penyusutan nilai aset server dan biaya maintenance tahunan (Bunga Majemuk).",
                            img: "https://images.unsplash.com/photo-1558494949-ef526b0042a0?auto=format&fit=crop&q=80&w=800"
                        },
                        DPIB: {
                            title: "RAB Proyek", context: "Manajemen Konstruksi",
                            task: "Hitung angsuran pinjaman modal proyek perumahan dengan sistem anuitas.",
                            img: "https://images.unsplash.com/photo-1554224155-8d04cb21cd6c?auto=format&fit=crop&q=80&w=800"
                        }
                    },
                    "Pemrograman Web": {
                        TKJ: {
                            title: "Web & Mobile Dev", context: "Dasar Website & Apps",
                            task: "Pelajari dasar pembuatan website responsif (HTML/CSS) dan pengenalan struktur aplikasi mobile. Terapkan logika layout grid.",
                            img: "https://images.unsplash.com/photo-1547658719-da2b51169166?auto=format&fit=crop&q=80&w=800"
                        },
                        RPL: {
                            title: "Web Programming", context: "Backend Logic",
                            task: "Buat algoritma validasi data pada sisi server.",
                            img: "https://images.unsplash.com/photo-1547658719-da2b51169166?auto=format&fit=crop&q=80&w=800"
                        },
                        DPIB: {
                            title: "Web Portfolio", context: "Portfolio Arsitek",
                            task: "Buat struktur layout galeri proyek menggunakan Grid System.",
                            img: "https://images.unsplash.com/photo-1547658719-da2b51169166?auto=format&fit=crop&q=80&w=800"
                        }
                    }
                }
            };

            const getCurrentData = () => {
                const levelDB = contentDatabase[selectedLevel];
                const topicDB = levelDB ? levelDB[selectedTopic] : null;
                const specificData = topicDB ? topicDB[selectedMajor] : null;

                if (specificData) {
                    return { ...specificData, themeColor: getThemeColor(selectedMajor), accentColor: getAccentColor(selectedMajor), icon: getIcon(selectedMajor) };
                } else {
                    return {
                        title: selectedTopic || "Materi Matematika",
                        context: `Penerapan di ${selectedMajor}`,
                        task: `Selesaikan permasalahan kontekstual ${selectedTopic} yang berkaitan dengan studi kasus ${selectedMajor}.`,
                        img: getGenericImage(selectedMajor),
                        themeColor: getThemeColor(selectedMajor),
                        accentColor: getAccentColor(selectedMajor),
                        icon: getIcon(selectedMajor)
                    };
                }
            };

            const getThemeColor = (major) => major === 'RPL' ? 'blue' : major === 'TKJ' ? 'emerald' : 'orange';
            const getAccentColor = (major) => major === 'RPL' ? 'from-blue-600 to-indigo-900' : major === 'TKJ' ? 'from-emerald-600 to-teal-900' : 'from-orange-600 to-red-900';
            const getIcon = (major) => major === 'RPL' ? <Terminal className="w-5 h-5"/> : major === 'TKJ' ? <Wifi className="w-5 h-5"/> : <Ruler className="w-5 h-5"/>;
            const getGenericImage = (major) => major === 'RPL' ? "https://images.unsplash.com/photo-1517694712202-14dd9538aa97?w=800" : major === 'TKJ' ? "https://images.unsplash.com/photo-1544197150-b99a580bbcbf?w=800" : "https://images.unsplash.com/photo-1503387762-592deb58ef4e?w=800";

            const currentData = getCurrentData();

            // Mapping DELTA ke Status Kanban
            const deltaStages = [
                { id: 'Discover', title: '1. Discover', subtitle: 'Investigasi Masalah', icon: <BookOpen className="w-4 h-4" />, kanbanStatus: 'todo' },
                { id: 'Explore', title: '2. Explore', subtitle: 'Eksperimen Konsep', icon: <Compass className="w-4 h-4" />, kanbanStatus: 'todo' },
                { id: 'Launch', title: '3. Launch', subtitle: 'Misi Utama', icon: <Rocket className="w-4 h-4" />, kanbanStatus: 'inprogress' },
                { id: 'Transform', title: '4. Transform', subtitle: 'Refleksi Diri', icon: <Repeat className="w-4 h-4" />, kanbanStatus: 'review' },
                { id: 'Assess', title: '5. Assess', subtitle: 'Uji Kompetensi', icon: <BarChart2 className="w-4 h-4" />, kanbanStatus: 'done' },
            ];

            const handleStartActivity = () => {
                const stage = activeDeltaStage;
                let content = { title: "", body: "", icon: null, actionText: "Selesai" };

                switch(stage) {
                    case 'Discover':
                        content = {
                            title: "Studi Kasus Kontekstual",
                            body: `Simak video permasalahan industri berikut terkait "${currentData.context}". \n\nTugas: Identifikasi variabel matematika (angka/rumus) apa saja yang muncul dalam masalah ini? Catat di buku catatanmu.`,
                            icon: <Video className="w-12 h-12 text-blue-400 mb-4"/>,
                            actionText: "Saya Sudah Menonton"
                        };
                        break;
                    case 'Explore':
                        content = {
                            title: "Laboratorium Virtual",
                            body: `Gunakan simulasi interaktif (GeoGebra/Desmos) untuk memahami konsep "${currentData.title}". \n\nTugas: Ubah nilai parameter pada grafik dan amati perubahannya. Temukan pola hubungannya sebelum lanjut ke tahap proyek.`,
                            icon: <Compass className="w-12 h-12 text-emerald-400 mb-4"/>,
                            actionText: "Buka Simulasi"
                        };
                        break;
                    case 'Launch':
                        content = {
                            title: "Project Brief: Misi Utama",
                            body: `TANTANGAN JURUSAN ${selectedMajor}:\n"${currentData.task}"\n\nLangkah:\n1. Analisis kebutuhan.\n2. Gunakan rumus ${currentData.title}.\n3. Validasi hasil hitunganmu.\n\nGunakan fitur "Tanya Mentor AI" jika buntu.`,
                            icon: <Rocket className="w-12 h-12 text-orange-400 mb-4"/>,
                            actionText: "Mulai Mengerjakan"
                        };
                        break;
                    case 'Transform':
                        content = {
                            title: "Refleksi Diri",
                            body: `Jawab pertanyaan ini:\n"Bagaimana pemahaman tentang ${currentData.title} akan membantumu menjadi seorang ahli ${selectedMajor} yang lebih baik?"\n\nRekam suaramu atau tuliskan minimal 1 paragraf.`,
                            icon: <MessageSquare className="w-12 h-12 text-purple-400 mb-4"/>,
                            actionText: "Kirim Refleksi"
                        };
                        break;
                    case 'Assess':
                        content = {
                            title: "Evaluasi Kompetensi",
                            body: `1. Kerjakan 5 soal kuis adaptif tentang ${currentData.title}.\n2. Unggah laporan penyelesaian proyek "${currentData.context}".\n\nPastikan semua data akurat.`,
                            icon: <FileText className="w-12 h-12 text-red-400 mb-4"/>,
                            actionText: "Mulai Kuis"
                        };
                        break;
                    default:
                        content = { title: "Info", body: "Konten sedang dimuat...", icon: <HelpCircle className="w-12 h-12"/> };
                }
                
                setActivityContent(content);
                setShowActivityModal(true);
            };

            const callGeminiAPI = async (type) => {
                setAiLoading(true);
                setAiResponse('');
                setAiPromptType(type);
                setShowAIModal(true);

                if (!apiKey) {
                    setAiResponse("‚ö†Ô∏è API Key belum diatur.");
                    setAiLoading(false);
                    return;
                }

                const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;

                let prompt = "";
                if (type === 'concept') {
                    prompt = `Sebagai guru matematika SMK yang asik bernama Pak Feri, jelaskan konsep "${currentData.title}" dalam konteks jurusan ${selectedMajor} (Kelas ${selectedLevel}) secara singkat, padat, dan memotivasi. Gunakan bahasa gaul yang sopan.`;
                } else if (type === 'project') {
                    prompt = `Saya siswa jurusan ${selectedMajor} Kelas ${selectedLevel}. Topik: ${selectedTopic}. Tugas saya: "${currentData.task}". Berikan 3 langkah panduan praktis (step-by-step) untuk menyelesaikannya. Berikan rumus yang relevan jika ada.`;
                }

                try {
                    const response = await fetch(url, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] })
                    });
                    const data = await response.json();
                    if (data.candidates && data.candidates[0].content) {
                        setAiResponse(data.candidates[0].content.parts[0].text);
                    } else if (data.error) {
                         setAiResponse(`Error: ${data.error.message}`);
                    } else {
                        setAiResponse("Maaf, Guru AI sedang sibuk. Coba lagi nanti ya!");
                    }
                } catch (error) {
                    console.error("Error calling Gemini:", error);
                    setAiResponse("Terjadi kesalahan koneksi. Periksa internetmu.");
                } finally {
                    setAiLoading(false);
                }
            };

            const startTour = () => {
                setIsTourActive(true);
                setTourStep(0);
            };

            const handleLogin = (e) => {
                e.preventDefault();
                if (userName.trim()) {
                    let major = 'RPL';
                    if (userClass.includes('TKJ')) major = 'TKJ';
                    else if (userClass.includes('DPIB')) major = 'DPIB';
                    
                    let level = 'SENIOR'; 
                    if (userClass.startsWith('X ') || userClass.startsWith('X-')) {
                        level = 'X';
                    }

                    setSelectedMajor(major);
                    setSelectedLevel(level);
                    
                    const defaultTopic = level === 'X' ? syllabus.X[0] : syllabus.SENIOR[0];
                    setSelectedTopic(defaultTopic);
                    
                    setIsLoggedIn(true);
                    // Start Tour Automatically on First Login (Simulated)
                    setTimeout(() => startTour(), 1000);
                }
            };

            const handleAdminAccess = (e) => {
                e.preventDefault();
                if (adminPassword === "F3r!-lee") {
                    window.location.href = "https://feriboard.netlify.app/";
                } else {
                    setAdminError("Password salah!");
                    setTimeout(() => setAdminError(''), 2000);
                }
            };

            const getTopicsList = () => {
                let topics = [...syllabus[selectedLevel]];
                if (userClass.includes('XII TKJ')) {
                    topics.push("Pemrograman Web");
                }
                return topics;
            };

            // --- HELPERS FOR TOUR HIGHLIGHT ---
            const getHighlightClass = (stepIndex) => {
                return isTourActive && tourStep === stepIndex 
                    ? "relative z-[201] ring-4 ring-indigo-500 rounded-xl box-border shadow-2xl transition-all duration-300" 
                    : "";
            };

            // --- COMPONENTS ---

            const TourOverlay = () => {
                const steps = [
                    { title: "Selamat Datang!", desc: "Mari kita lihat fitur utama DeltaMath.", position: "center" },
                    { title: "Pilih Materi", desc: "Ganti topik pembelajaran di sini sesuai kebutuhanmu.", position: "top" },
                    { title: "Alur DELTA", desc: "5 Tahapan belajar: Discover hingga Assess.", position: "middle" },
                    { title: "Aktivitas Pembelajaran", desc: "Tempat mengerjakan tugas, kuis, dan simulasi.", position: "bottom" },
                    { title: "Pengumuman", desc: "Cek info sekolah dan deadline tugas di menu ini.", position: "bottom-right" },
                ];

                const current = steps[tourStep];

                const handleNext = (inc) => {
                    const nextStep = tourStep + inc;
                    if (nextStep >= steps.length) {
                        setIsTourActive(false);
                    } else if (nextStep < 0) {
                        // do nothing
                    } else {
                        setTourStep(nextStep);
                    }
                };

                return (
                    <div className="fixed inset-0 z-[200] bg-black/80 backdrop-blur-sm flex transition-all duration-500 animate-fadeIn" onClick={() => handleNext(1)}>
                       <div 
                            onClick={(e) => e.stopPropagation()}
                            className={`absolute p-6 bg-white text-slate-900 rounded-2xl shadow-2xl max-w-xs border-4 border-indigo-500 transition-all duration-500 ease-in-out z-[202]
                                ${current.position === 'center' ? 'top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2' : ''}
                                ${current.position === 'top' ? 'top-24 left-1/2 -translate-x-1/2' : ''}
                                ${current.position === 'middle' ? 'top-1/2 left-1/2 -translate-x-1/2 translate-y-24' : ''}
                                ${current.position === 'bottom' ? 'bottom-32 left-4 md:left-auto md:left-1/2 md:-translate-x-1/2 md:bottom-auto md:top-3/4' : ''}
                                ${current.position === 'bottom-right' ? 'bottom-24 right-4 md:right-auto md:left-64 md:bottom-24' : ''}
                            `}
                        >
                          <div className="flex justify-between items-center mb-2">
                             <span className="text-xs font-bold text-indigo-600 uppercase tracking-wider">Tur Panduan {tourStep + 1}/{steps.length}</span>
                             <button onClick={() => setIsTourActive(false)} className="text-slate-400 hover:text-red-500"><CloseIcon className="w-4 h-4"/></button>
                          </div>
                          <h3 className="text-lg font-bold mb-2 text-slate-900">{current.title}</h3>
                          <p className="text-sm text-slate-600 mb-4 leading-relaxed">{current.desc}</p>
                          <div className="flex justify-end gap-2">
                             {tourStep > 0 && <button onClick={() => handleNext(-1)} className="text-xs font-bold text-slate-500 px-3 py-2 hover:bg-slate-100 rounded">Kembali</button>}
                             <button onClick={() => handleNext(1)} className="bg-indigo-600 text-white text-xs font-bold px-4 py-2 rounded-lg shadow-lg hover:bg-indigo-500 transition-all">
                                {tourStep === steps.length - 1 ? "Selesai" : "Lanjut"}
                             </button>
                          </div>
                       </div>
                    </div>
                )
            };

            const AnnouncementsView = () => {
                const announcements = [
                    { id: 1, title: "Jadwal Penilaian Akhir Semester (PAS)", category: "Akademik", date: "5 Jan 2026", desc: "Ujian akan dilaksanakan mulai tanggal 15 Januari. Pastikan semua tugas DELTA tahap Launch sudah dikumpulkan.", urgent: true },
                    { id: 2, title: "Deadline Proyek Statistika Diperpanjang", category: "Tugas", date: "4 Jan 2026", desc: "Untuk kelas X TKJ, deadline proyek analisis bandwidth diperpanjang hingga Jumat depan.", urgent: false },
                    { id: 3, title: "Lomba Matematika Terapan Vokasi", category: "Prestasi", date: "2 Jan 2026", desc: "Pendaftaran dibuka untuk lomba tingkat provinsi. Hubungi Pak Feri jika berminat bimbingan.", urgent: false },
                    { id: 4, title: "Libur Hari Raya", category: "Info", date: "1 Jan 2026", desc: "Sekolah libur pada tanggal merah. Gunakan waktu untuk istirahat atau refleksi mandiri.", urgent: false },
                ];

                const getCategoryColor = (cat) => {
                    switch(cat) {
                        case 'Akademik': return 'red';
                        case 'Tugas': return 'yellow';
                        case 'Prestasi': return 'purple';
                        default: return 'blue';
                    }
                };

                return (
                    <div className="p-4 md:p-8 h-full overflow-y-auto pb-24 md:pb-0">
                        <div className="flex items-center justify-between mb-6">
                            <div>
                                <h2 className="text-2xl font-bold text-white flex items-center gap-3">
                                    <Megaphone className="w-6 h-6 text-orange-500" /> Papan Pengumuman
                                </h2>
                                <p className="text-slate-400 text-sm mt-1">Info terbaru seputar akademik dan kegiatan sekolah.</p>
                            </div>
                            <div className="hidden md:block">
                                <span className="bg-slate-800 text-slate-400 px-3 py-1 rounded-lg text-xs font-medium border border-slate-700">
                                    Semester Genap 2025/2026
                                </span>
                            </div>
                        </div>

                        <div className="mb-8">
                            <h3 className="text-sm font-bold text-slate-400 uppercase tracking-widest mb-3 flex items-center gap-2">
                                <Pin className="w-4 h-4" /> Disematkan
                            </h3>
                            {announcements.filter(a => a.urgent).map(item => (
                                <div key={item.id} className="bg-gradient-to-r from-red-900/40 to-slate-900 border border-red-500/30 rounded-xl p-6 relative overflow-hidden shadow-lg">
                                    <div className="absolute top-0 right-0 p-3 opacity-10">
                                        <AlertCircle className="w-24 h-24 text-red-500" />
                                    </div>
                                    <div className="relative z-10">
                                        <span className="inline-block bg-red-500 text-white text-[10px] font-bold px-2 py-1 rounded mb-2">PENTING</span>
                                        <h3 className="text-xl font-bold text-white mb-2">{item.title}</h3>
                                        <p className="text-slate-300 text-sm mb-4 max-w-2xl">{item.desc}</p>
                                        <div className="flex items-center gap-2 text-slate-400 text-xs">
                                            <CalendarDays className="w-4 h-4" /> {item.date}
                                        </div>
                                    </div>
                                </div>
                            ))}
                        </div>

                        <div>
                            <h3 className="text-sm font-bold text-slate-400 uppercase tracking-widest mb-4">Terbaru</h3>
                            <div className="space-y-4">
                                {announcements.filter(a => !a.urgent).map((item, idx) => (
                                    <div key={item.id} className="flex gap-4 group">
                                        <div className="flex flex-col items-center">
                                            <div className={`w-3 h-3 rounded-full bg-${getCategoryColor(item.category)}-500 mt-2 ring-4 ring-slate-900`}></div>
                                            {idx !== announcements.length - 1 && <div className="w-0.5 h-full bg-slate-800 my-2"></div>}
                                        </div>
                                        <div className="flex-1 bg-slate-900 border border-slate-800 p-4 rounded-xl hover:border-slate-700 transition-colors">
                                            <div className="flex justify-between items-start mb-2">
                                                <span className={`text-[10px] font-bold px-2 py-0.5 rounded bg-${getCategoryColor(item.category)}-900/30 text-${getCategoryColor(item.category)}-400 border border-${getCategoryColor(item.category)}-500/20`}>
                                                    {item.category}
                                                </span>
                                                <span className="text-[10px] text-slate-500">{item.date}</span>
                                            </div>
                                            <h4 className="text-white font-bold text-sm mb-1">{item.title}</h4>
                                            <p className="text-slate-400 text-xs leading-relaxed">{item.desc}</p>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>
                    </div>
                );
            };

            const TeacherProfile = () => (
                <div className="p-4 md:p-8 h-full overflow-y-auto pb-24 md:pb-0">
                    <div className="bg-gradient-to-r from-slate-900 to-slate-800 rounded-2xl border border-slate-700 overflow-hidden relative mb-6">
                        <div className="absolute top-0 w-full h-32 bg-gradient-to-r from-blue-900/50 to-purple-900/50"></div>
                        <div className="p-6 relative pt-16 md:pt-20">
                            <div className="flex flex-col md:flex-row items-start md:items-end gap-4">
                                <div className="w-24 h-24 rounded-2xl bg-slate-700 border-4 border-slate-800 shadow-xl overflow-hidden flex items-center justify-center text-4xl">
                                    üë®‚Äçüè´
                                </div>
                                <div className="flex-1">
                                    <div className="flex items-center gap-2 mb-1">
                                        <h2 className="text-2xl font-bold text-white">Feri Dwi Hermawan, S.Pd.</h2>
                                        <span className="bg-blue-500/20 text-blue-300 text-[10px] px-2 py-0.5 rounded border border-blue-500/30">Verified Teacher</span>
                                    </div>
                                    <p className="text-slate-400 text-sm mb-3">Guru Matematika ‚Ä¢ SMKN Pasirian</p>
                                    <div className="flex flex-wrap gap-2">
                                        <span className="bg-slate-800 text-slate-300 px-3 py-1 rounded-full text-xs border border-slate-700">RPL</span>
                                        <span className="bg-slate-800 text-slate-300 px-3 py-1 rounded-full text-xs border border-slate-700">TKJ</span>
                                        <span className="bg-slate-800 text-slate-300 px-3 py-1 rounded-full text-xs border border-slate-700">DPIB</span>
                                    </div>
                                </div>
                                <div className="flex gap-2 w-full md:w-auto mt-4 md:mt-0">
                                    <button className="flex-1 md:flex-none bg-green-600 hover:bg-green-500 text-white px-4 py-2 rounded-lg text-sm font-bold flex items-center justify-center gap-2 transition-colors">
                                        <MessageSquare className="w-4 h-4" /> Chat WA
                                    </button>
                                    <button className="flex-1 md:flex-none bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded-lg text-sm font-bold flex items-center justify-center gap-2 transition-colors">
                                        <Mail className="w-4 h-4" /> Email
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div className="space-y-6">
                            <div className="bg-slate-900 border border-slate-800 rounded-xl p-5">
                                <h3 className="text-sm font-bold text-white mb-4 flex items-center gap-2">
                                    <BarChart2 className="w-4 h-4 text-indigo-400" /> Statistik Pengajaran
                                </h3>
                                <div className="grid grid-cols-2 gap-3">
                                    <div className="bg-slate-800/50 p-3 rounded-lg border border-slate-700">
                                        <p className="text-2xl font-bold text-white">12+</p>
                                        <p className="text-[10px] text-slate-400 uppercase">Tahun Mengajar</p>
                                    </div>
                                    <div className="bg-slate-800/50 p-3 rounded-lg border border-slate-700">
                                        <p className="text-2xl font-bold text-white">500+</p>
                                        <p className="text-[10px] text-slate-400 uppercase">Siswa Lulus</p>
                                    </div>
                                    <div className="bg-slate-800/50 p-3 rounded-lg border border-slate-700 col-span-2">
                                        <p className="text-sm font-bold text-white mb-1">Creator DELTA Strategy</p>
                                        <p className="text-[10px] text-slate-400">Metode pembelajaran inovatif berbasis proyek.</p>
                                    </div>
                                </div>
                            </div>

                            <div className="bg-slate-900 border border-slate-800 rounded-xl p-5">
                                <h3 className="text-sm font-bold text-white mb-3 flex items-center gap-2">
                                    <Sparkles className="w-4 h-4 text-yellow-400" /> Filosofi Mengajar
                                </h3>
                                <p className="text-sm text-slate-300 leading-relaxed italic">
                                    "Matematika bukan tentang menghafal rumus, tapi tentang seni memecahkan masalah. Di kelas ini, kita menggunakan strategi <strong>DELTA</strong> untuk mengubah (transform) ketakutan menjadi keahlian nyata."
                                </p>
                            </div>
                        </div>

                        <div className="md:col-span-2 space-y-6">
                            <div className="bg-slate-900 border border-slate-800 rounded-xl p-5">
                                <h3 className="text-sm font-bold text-white mb-4 flex items-center gap-2">
                                    <Clock className="w-4 h-4 text-orange-400" /> Jam Konsultasi (Office Hours)
                                </h3>
                                <div className="space-y-3">
                                    {[
                                        { day: "Senin", time: "13:00 - 14:00", loc: "Ruang Guru / Zoom" },
                                        { day: "Rabu", time: "09:40 - 10:20 (Istirahat)", loc: "Lab Komputer" },
                                        { day: "Jumat", time: "11:00 - 13:00", loc: "Perpustakaan" },
                                    ].map((slot, idx) => (
                                        <div key={idx} className="flex justify-between items-center bg-slate-800/30 p-3 rounded-lg hover:bg-slate-800/60 transition-colors cursor-default">
                                            <div className="flex items-center gap-3">
                                                <div className="w-8 h-8 rounded-full bg-slate-700 flex items-center justify-center text-slate-300">
                                                    <Calendar className="w-4 h-4" />
                                                </div>
                                                <div>
                                                    <p className="text-sm font-bold text-white">{slot.day}</p>
                                                    <p className="text-xs text-slate-400">{slot.time}</p>
                                                </div>
                                            </div>
                                            <span className="text-xs bg-indigo-900/30 text-indigo-300 px-2 py-1 rounded border border-indigo-500/20">
                                                {slot.loc}
                                            </span>
                                        </div>
                                    ))}
                                </div>
                            </div>

                            <div className="bg-slate-900 border border-slate-800 rounded-xl p-5">
                                <h3 className="text-sm font-bold text-white mb-4 flex items-center gap-2">
                                    <Award className="w-4 h-4 text-pink-400" /> Sertifikasi & Pencapaian
                                </h3>
                                <div className="grid grid-cols-1 sm:grid-cols-2 gap-4">
                                    <div className="flex items-start gap-3">
                                        <div className="mt-1"><CheckCircle2 className="w-4 h-4 text-green-500" /></div>
                                        <div>
                                            <p className="text-sm font-bold text-white">Google Certified Educator</p>
                                            <p className="text-xs text-slate-400">Level 1 & 2</p>
                                        </div>
                                    </div>
                                    <div className="flex items-start gap-3">
                                        <div className="mt-1"><CheckCircle2 className="w-4 h-4 text-green-500" /></div>
                                        <div>
                                            <p className="text-sm font-bold text-white">Microsoft Innovative Educator</p>
                                            <p className="text-xs text-slate-400">Expert 2024</p>
                                        </div>
                                    </div>
                                    <div className="flex items-start gap-3">
                                        <div className="mt-1"><CheckCircle2 className="w-4 h-4 text-green-500" /></div>
                                        <div>
                                            <p className="text-sm font-bold text-white">Penulis Modul Matematika Vokasi</p>
                                            <p className="text-xs text-slate-400">Kurikulum Merdeka</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );

            const KanbanCard = ({ stage, currentData, isActive, onClick }) => (
                <div 
                    onClick={onClick}
                    className={`p-3 rounded-lg border cursor-pointer transition-all hover:-translate-y-1 mb-3 group
                        ${isActive 
                            ? `bg-${currentData.themeColor}-900/40 border-${currentData.themeColor}-500/50 shadow-lg shadow-${currentData.themeColor}-500/10` 
                            : 'bg-slate-800 border-slate-700 hover:border-slate-600'}`}
                >
                    <div className="flex justify-between items-start mb-2">
                         <span className={`px-2 py-0.5 rounded text-[10px] font-bold ${isActive ? `bg-${currentData.themeColor}-500 text-white` : 'bg-slate-700 text-slate-400'}`}>
                             {stage.title.split('.')[1]}
                         </span>
                         {stage.id === 'Launch' && <Rocket className={`w-3 h-3 ${isActive ? 'text-white' : 'text-slate-500'}`} />}
                    </div>
                    <h4 className="text-sm font-bold text-white mb-1 leading-snug">{stage.subtitle}</h4>
                    
                    {stage.id === 'Launch' && isActive && (
                         <div className="mt-2 text-xs text-slate-300 bg-black/20 p-2 rounded border border-white/5">
                             {currentData.task.substring(0, 60)}...
                         </div>
                    )}

                    <div className="flex justify-between items-center mt-3">
                         <div className="flex -space-x-1">
                             <div className="w-5 h-5 rounded-full bg-slate-600 border border-slate-800 flex items-center justify-center text-[8px] text-white">FH</div>
                         </div>
                         {isActive && <div className={`w-2 h-2 rounded-full bg-${currentData.themeColor}-500 animate-pulse`}></div>}
                    </div>
                </div>
            );

            // --- RENDER CONTENT ---
            const renderContent = () => {
                if (activeTab === 'teacher') {
                    return <TeacherProfile />;
                }

                if (activeTab === 'announcements') {
                    return <AnnouncementsView />;
                }

                if (viewMode === 'kanban') {
                    return (
                        <div className="p-4 md:p-8 h-full overflow-hidden flex flex-col">
                            {/* KANBAN HEADER */}
                            <div className="mb-6 flex flex-col md:flex-row justify-between items-start md:items-end gap-4">
                                <div>
                                    <div className="flex items-center gap-2 mb-1 text-slate-400 text-xs uppercase tracking-widest font-bold">
                                         <LayoutList className="w-4 h-4" /> Mode Proyek
                                    </div>
                                    <h2 className="text-2xl font-bold text-white">{currentData.title}</h2>
                                    <p className="text-slate-400 text-sm mt-1 max-w-xl">{currentData.context}: {currentData.task}</p>
                                </div>
                                <div className="flex gap-2">
                                     <button onClick={() => callGeminiAPI('project')} className="bg-indigo-600 hover:bg-indigo-500 text-white text-xs font-bold py-2 px-4 rounded-lg flex items-center gap-2 shadow-lg shadow-indigo-600/20">
                                         <Sparkles className="w-4 h-4" /> Mentor AI
                                     </button>
                                </div>
                            </div>

                            {/* KANBAN BOARD */}
                            <div className="flex-1 overflow-x-auto overflow-y-hidden">
                                <div className="flex h-full gap-4 min-w-[800px] pb-4">
                                    {/* COLUMN 1: PERSIAPAN */}
                                    <div className="flex-1 bg-slate-900/50 rounded-xl border border-slate-800 flex flex-col">
                                        <div className="p-3 border-b border-slate-800 flex justify-between items-center">
                                            <h3 className="font-bold text-slate-300 text-sm flex items-center gap-2">
                                                <div className="w-2 h-2 rounded-full bg-slate-500"></div> Persiapan
                                            </h3>
                                            <span className="text-xs bg-slate-800 px-2 py-0.5 rounded text-slate-500">2</span>
                                        </div>
                                        <div className="p-3 flex-1 overflow-y-auto">
                                            {deltaStages.filter(s => s.kanbanStatus === 'todo').map(stage => (
                                                <KanbanCard 
                                                    key={stage.id} stage={stage} currentData={currentData} 
                                                    isActive={activeDeltaStage === stage.id}
                                                    onClick={() => setActiveDeltaStage(stage.id)}
                                                />
                                            ))}
                                        </div>
                                    </div>

                                    {/* COLUMN 2: PENGERJAAN (LAUNCH) */}
                                    <div className="flex-1 bg-slate-900/50 rounded-xl border border-slate-800 flex flex-col relative overflow-hidden">
                                        <div className={`absolute top-0 left-0 w-full h-1 bg-${currentData.themeColor}-500`}></div>
                                        <div className="p-3 border-b border-slate-800 flex justify-between items-center">
                                            <h3 className={`font-bold text-${currentData.themeColor}-400 text-sm flex items-center gap-2`}>
                                                <div className={`w-2 h-2 rounded-full bg-${currentData.themeColor}-500 animate-pulse`}></div> Pengerjaan (Launch)
                                            </h3>
                                            <span className="text-xs bg-slate-800 px-2 py-0.5 rounded text-slate-500">1</span>
                                        </div>
                                        <div className="p-3 flex-1 overflow-y-auto bg-gradient-to-b from-slate-900 to-transparent">
                                            {deltaStages.filter(s => s.kanbanStatus === 'inprogress').map(stage => (
                                                <KanbanCard 
                                                    key={stage.id} stage={stage} currentData={currentData} 
                                                    isActive={activeDeltaStage === stage.id}
                                                    onClick={() => setActiveDeltaStage(stage.id)}
                                                />
                                            ))}
                                            {/* Extra Context Card for Launch */}
                                            <div className="mt-2 p-3 rounded-lg border border-dashed border-slate-700 bg-slate-800/30 text-center">
                                                <p className="text-xs text-slate-400 mb-2">Butuh bantuan memulai proyek?</p>
                                                <button onClick={() => callGeminiAPI('project')} className="text-xs text-indigo-400 hover:text-indigo-300 font-bold underline">
                                                    Tanya AI Step-by-Step
                                                </button>
                                            </div>
                                        </div>
                                    </div>

                                    {/* COLUMN 3: REVIEW & SELESAI */}
                                    <div className="flex-1 bg-slate-900/50 rounded-xl border border-slate-800 flex flex-col">
                                        <div className="p-3 border-b border-slate-800 flex justify-between items-center">
                                            <h3 className="font-bold text-slate-300 text-sm flex items-center gap-2">
                                                <div className="w-2 h-2 rounded-full bg-emerald-500"></div> Evaluasi
                                            </h3>
                                            <span className="text-xs bg-slate-800 px-2 py-0.5 rounded text-slate-500">2</span>
                                        </div>
                                        <div className="p-3 flex-1 overflow-y-auto">
                                            {deltaStages.filter(s => ['review', 'done'].includes(s.kanbanStatus)).map(stage => (
                                                <KanbanCard 
                                                    key={stage.id} stage={stage} currentData={currentData} 
                                                    isActive={activeDeltaStage === stage.id}
                                                    onClick={() => setActiveDeltaStage(stage.id)}
                                                />
                                            ))}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    );
                }

                // --- DEFAULT STREAM VIEW (NETFLIX STYLE) ---
                return (
                    <div className="relative w-full h-full overflow-y-auto pb-20 md:pb-0">
                         {/* HERO SECTION */}
                        <div className="relative w-full h-[500px] md:h-[60vh] overflow-hidden group">
                            <img 
                                src={currentData.img} 
                                alt={selectedMajor}
                                className="absolute inset-0 w-full h-full object-cover transition-transform duration-1000 group-hover:scale-105"
                            />
                            <div className={`absolute inset-0 bg-gradient-to-br ${currentData.accentColor} opacity-40 mix-blend-multiply`}></div>
                            <div className="absolute inset-0 bg-gradient-to-t from-slate-950 via-slate-950/50 to-transparent"></div>
                            <div className="absolute inset-0 bg-gradient-to-r from-slate-950/80 via-transparent to-transparent"></div>
                            
                            <div className="absolute bottom-0 w-full p-6 md:p-10 pb-8 space-y-4 max-w-4xl">
                                <div className="animate-fadeIn">
                                    <p className="text-lg md:text-xl text-slate-200 font-medium drop-shadow-md">
                                        Hai, <span className="font-bold text-white">{userName}</span>! üëã
                                    </p>
                                </div>

                                <div className="flex items-center gap-2 mb-1">
                                    <span className={`px-2 py-0.5 bg-${currentData.themeColor}-600/80 backdrop-blur-sm border border-${currentData.themeColor}-400/50 rounded text-[10px] md:text-xs font-bold text-white uppercase shadow-lg`}>
                                        Materi Minggu Ini
                                    </span>
                                    <span className="px-2 py-0.5 bg-white/20 backdrop-blur-sm rounded text-[10px] md:text-xs text-white border border-white/30 font-semibold">
                                        {selectedMajor} ‚Ä¢ Kelas {selectedLevel}
                                    </span>
                                </div>
                                
                                <h1 className="text-4xl md:text-6xl font-extrabold text-white leading-tight drop-shadow-2xl">
                                    {currentData.title}
                                </h1>
                                
                                <p className="text-sm md:text-lg text-slate-200 line-clamp-2 max-w-[90%] md:max-w-2xl drop-shadow-lg font-medium leading-relaxed">
                                    {currentData.context}: {currentData.task}
                                </p>

                                <div className="flex items-center gap-2 py-1">
                                    <div className="w-5 h-5 rounded-full bg-slate-700 border border-slate-500 flex items-center justify-center overflow-hidden">
                                        <User className="w-3 h-3 text-slate-300" /> 
                                    </div>
                                    <p className="text-xs md:text-sm text-slate-300 font-medium">
                                        Guru Pengampu: <span className="text-white">Feri Dwi Hermawan, S.Pd.</span>
                                    </p>
                                </div>
                                
                                <div className="flex items-center gap-3 pt-2 max-w-md">
                                    <button className="flex-1 bg-white text-black font-bold py-3 px-4 rounded-lg flex items-center justify-center gap-2 hover:bg-slate-200 transition-colors shadow-xl shadow-black/20">
                                        <Play className="w-5 h-5 fill-black" />
                                        Lanjut Belajar
                                    </button>
                                    <button 
                                        onClick={() => callGeminiAPI('concept')}
                                        className="flex-none bg-slate-800/60 backdrop-blur-md text-white p-3 px-4 rounded-lg border border-slate-500/50 hover:bg-indigo-600 hover:border-indigo-400 transition-all group flex flex-col items-center justify-center"
                                    >
                                        <Sparkles className="w-5 h-5 text-yellow-400 mb-0.5" />
                                    </button>
                                </div>
                            </div>
                        </div>

                        {/* DELTA STAGES HORIZONTAL */}
                        <div className={`px-4 md:px-10 mt-6 md:mt-8 transition-all ${getHighlightClass(2)}`}>
                            <h3 className="text-white font-bold text-lg md:text-xl mb-4 flex items-center gap-2">
                                Tahapan DELTA <span className="text-xs font-normal text-slate-500 ml-auto">Geser ‚Üí</span>
                            </h3>
                            
                            <div className="flex overflow-x-auto gap-4 md:gap-6 pb-8 -mx-4 md:-mx-0 px-4 md:px-0 snap-x hide-scrollbar">
                                {deltaStages.map((stage, index) => {
                                    const isActive = activeDeltaStage === stage.id;
                                    return (
                                        <div 
                                            key={stage.id}
                                            onClick={() => setActiveDeltaStage(stage.id)}
                                            className={`snap-center flex-none w-40 md:w-56 relative group cursor-pointer transition-all duration-300
                                                ${isActive ? 'scale-105' : 'opacity-80 hover:opacity-100'}
                                            `}
                                        >
                                            <div className={`
                                                h-56 md:h-72 rounded-xl overflow-hidden relative border-2 transition-all
                                                ${isActive 
                                                    ? `border-${currentData.themeColor}-500 shadow-lg shadow-${currentData.themeColor}-900/50` 
                                                    : 'border-slate-800 bg-slate-900'}
                                            `}>
                                                <div className={`absolute inset-0 bg-gradient-to-b ${isActive ? `from-${currentData.themeColor}-900/40 to-slate-900` : 'from-slate-800 to-slate-900'}`}></div>
                                                <div className="absolute top-2 right-4 text-5xl md:text-7xl font-black text-white/5 z-0">
                                                    {index + 1}
                                                </div>
                                                <div className="absolute inset-0 p-4 flex flex-col justify-end z-10">
                                                    <div className={`w-8 h-8 md:w-10 md:h-10 rounded-full flex items-center justify-center mb-3 ${isActive ? `bg-${currentData.themeColor}-500 text-white` : 'bg-slate-800 text-slate-500'}`}>
                                                        {stage.icon}
                                                    </div>
                                                    <h4 className={`font-bold text-sm md:text-lg leading-tight mb-1 ${isActive ? 'text-white' : 'text-slate-300'}`}>
                                                        {stage.title}
                                                    </h4>
                                                    <p className="text-[10px] md:text-xs text-slate-400 line-clamp-2">
                                                        {stage.subtitle}
                                                    </p>
                                                    {isActive && (
                                                        <div className="w-full h-1 bg-slate-700 rounded-full mt-4 overflow-hidden">
                                                            <div className={`h-full bg-${currentData.themeColor}-500 w-2/3`}></div>
                                                        </div>
                                                    )}
                                                </div>
                                            </div>
                                        </div>
                                    );
                                })}
                            </div>
                        </div>

                        {/* CONTENT DETAIL */}
                        <div className={`px-4 md:px-10 mb-8 max-w-6xl ${getHighlightClass(3)}`}>
                            <div className="bg-slate-900 border border-slate-800 rounded-2xl p-6 md:p-8 relative overflow-hidden">
                                <div className={`absolute top-0 right-0 w-64 h-64 bg-${currentData.themeColor}-500/10 rounded-full blur-3xl -mr-20 -mt-20 pointer-events-none`}></div>
                                <div className="flex justify-between items-start mb-4">
                                    <h4 className="text-slate-400 text-xs md:text-sm font-bold uppercase tracking-wider">Sedang Dibuka: <span className="text-white">{activeDeltaStage}</span></h4>
                                    {activeDeltaStage === 'Launch' && (
                                        <span className="flex items-center gap-1.5 px-3 py-1 rounded-full bg-indigo-900/50 border border-indigo-500/30 text-xs text-indigo-300 font-bold animate-pulse">
                                            <Sparkles className="w-3.5 h-3.5" /> AI Powered
                                        </span>
                                    )}
                                </div>
                                <div className="flex flex-col gap-6 relative z-10">
                                    <div className="flex-1">
                                        <h3 className="text-xl md:text-2xl font-bold text-white mb-2">Aktivitas Pembelajaran</h3>
                                        <p className="text-sm md:text-base text-slate-300 leading-relaxed max-w-3xl">
                                            {activeDeltaStage === 'Launch' 
                                                ? `Tantangan khusus jurusan ${selectedMajor} (${selectedLevel}): ${currentData.task}`
                                                : "Klik tombol 'Mulai Aktivitas' di bawah untuk membuka modul interaktif, video studi kasus, atau kuis yang sesuai dengan tahapan ini."}
                                        </p>
                                    </div>
                                    <div className="flex flex-wrap gap-3 mt-2">
                                        <button 
                                            onClick={handleStartActivity}
                                            className={`py-3 px-6 rounded-xl text-sm font-bold bg-${currentData.themeColor}-600 hover:bg-${currentData.themeColor}-500 text-white flex items-center justify-center gap-2 transition-colors shadow-lg`}
                                        >
                                            Mulai Aktivitas <ChevronRight className="w-4 h-4" />
                                        </button>
                                        {activeDeltaStage === 'Launch' && (
                                            <button 
                                                onClick={() => callGeminiAPI('project')}
                                                className={`py-3 px-6 rounded-xl text-sm font-bold bg-indigo-600 hover:bg-indigo-500 text-white flex items-center justify-center gap-2 border border-indigo-400 shadow-lg shadow-indigo-500/20 transition-all active:scale-95`}
                                            >
                                                <Sparkles className="w-4 h-4" /> Tanya Mentor AI
                                            </button>
                                        )}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                )
            };

            // --- LOGIN SCREEN ---
            if (!isLoggedIn) {
                return (
                    <div className="min-h-screen bg-slate-950 text-white font-sans flex items-center justify-center p-6 relative overflow-hidden">
                        <div className="absolute top-0 left-0 w-full h-full bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-10"></div>
                        <div className="absolute top-[-10%] right-[-10%] w-96 h-96 bg-indigo-600 rounded-full blur-[100px] opacity-30"></div>
                        <div className="absolute bottom-[-10%] left-[-10%] w-96 h-96 bg-blue-600 rounded-full blur-[100px] opacity-30"></div>

                        <div className="relative z-10 w-full max-w-md space-y-8 animate-fadeIn">
                            <div className="text-center space-y-2">
                                <div className="w-20 h-20 bg-gradient-to-tr from-blue-500 to-indigo-600 rounded-3xl mx-auto flex items-center justify-center shadow-lg shadow-blue-500/30 mb-6 transform rotate-3">
                                    <span className="text-4xl font-bold">Œî</span>
                                </div>
                                <h1 className="text-4xl font-bold tracking-tight">DeltaMath <span className="text-blue-400">Vokasi</span></h1>
                                <p className="text-slate-400 text-base">Platform Belajar Matematika Terpersonalisasi</p>
                            </div>

                            <div className="bg-slate-900/60 backdrop-blur-xl p-8 rounded-3xl border border-slate-800 shadow-2xl">
                                <div className="mb-6 pb-4 border-b border-slate-700/50">
                                    <p className="text-xs text-slate-400 uppercase tracking-widest text-center mb-1">Guru Pengampu</p>
                                    <p className="text-lg font-medium text-center text-white">Feri Dwi Hermawan, S.Pd.</p>
                                </div>

                                <form onSubmit={handleLogin} className="space-y-6">
                                    
                                    {/* Floating Label Input: Nama Lengkap */}
                                    <div className="relative">
                                        <input 
                                            type="text" 
                                            id="floating_nama"
                                            required
                                            className="block px-4 pb-2.5 pt-5 w-full text-sm text-white bg-slate-800 border border-slate-700 rounded-xl appearance-none focus:outline-none focus:ring-2 focus:ring-blue-500 peer placeholder-transparent"
                                            placeholder=" "
                                            value={userName}
                                            onChange={(e) => setUserName(e.target.value)}
                                        />
                                        <label 
                                            htmlFor="floating_nama" 
                                            className="absolute text-sm text-slate-400 duration-300 transform -translate-y-4 scale-75 top-4 z-10 origin-[0] left-4 peer-focus:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-4"
                                        >
                                            Nama Lengkap
                                        </label>
                                    </div>
                                    
                                    {/* Dropdown Kelas Updated */}
                                    <div>
                                        <label className="block text-xs font-medium text-slate-400 mb-1.5 ml-1">Kelas / Jurusan</label>
                                        <div className="relative">
                                            <select 
                                                className="w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3.5 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 text-white appearance-none cursor-pointer transition-all hover:border-slate-500"
                                                value={userClass}
                                                onChange={(e) => setUserClass(e.target.value)}
                                            >
                                                <option value="X TKJ A">X TKJ A</option>
                                                <option value="X TKJ B">X TKJ B</option>
                                                <option value="X DPIB">X DPIB</option>
                                                <option value="XI RPL">XI RPL</option>
                                                <option value="XI DPIB">XI DPIB</option>
                                                <option value="XII TKJ A">XII TKJ A</option>
                                                <option value="XII TKJ B">XII TKJ B</option>
                                            </select>
                                            <div className="absolute inset-y-0 right-0 flex items-center px-3 pointer-events-none text-slate-400">
                                                <ChevronRight className="w-4 h-4 rotate-90" />
                                            </div>
                                        </div>
                                    </div>

                                    <button 
                                        type="submit"
                                        className="w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500 text-white font-bold py-4 rounded-xl shadow-lg shadow-blue-600/30 transition-all active:scale-95 flex items-center justify-center gap-2 mt-4"
                                    >
                                        Mulai Belajar <LogIn className="w-5 h-5" />
                                    </button>
                                </form>
                            </div>
                            <p className="text-center text-xs text-slate-600">SMKN Pasirian ‚Ä¢ E-Course Platform</p>
                        </div>

                        {/* ADMIN BUTTON (FLOATING ON LOGIN TOO) */}
                        <button
                            onClick={() => setShowAdminModal(true)}
                            className="fixed bottom-4 right-4 z-50 p-3 bg-red-600/90 hover:bg-red-500 text-white rounded-full shadow-lg border border-red-400/50 transition-all hover:scale-110 flex items-center justify-center group"
                            title="Akses FeriBoard"
                        >
                            <Globe className="w-5 h-5 group-hover:animate-spin" />
                        </button>

                         {/* ADMIN MODAL */}
                        {showAdminModal && (
                            <div className="fixed inset-0 z-[101] flex items-center justify-center px-4 bg-black/80 backdrop-blur-sm animate-fadeIn">
                                <div className="bg-slate-900 border border-slate-700 p-6 rounded-2xl shadow-2xl w-full max-w-sm relative">
                                    <button 
                                        onClick={() => setShowAdminModal(false)} 
                                        className="absolute top-4 right-4 text-slate-400 hover:text-white"
                                    >
                                        <CloseIcon className="w-5 h-5"/>
                                    </button>
                                    
                                    <div className="flex items-center gap-3 mb-6">
                                        <div className="p-2 bg-red-900/50 rounded-lg border border-red-500/30">
                                            <Lock className="w-5 h-5 text-red-500"/> 
                                        </div>
                                        <div>
                                            <h3 className="font-bold text-white text-lg">Admin Access</h3>
                                            <p className="text-xs text-slate-400">Restricted Area</p>
                                        </div>
                                    </div>
                                    
                                    <form onSubmit={handleAdminAccess} className="space-y-4">
                                        <div>
                                            <label className="text-xs font-bold text-slate-500 uppercase mb-1 block">Password</label>
                                            <input 
                                                type="password" 
                                                className={`w-full bg-slate-800 border ${adminError ? 'border-red-500 animate-pulse' : 'border-slate-700'} rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-red-500 transition-all`}
                                                placeholder="Enter access code..."
                                                value={adminPassword}
                                                onChange={(e) => setAdminPassword(e.target.value)}
                                                autoFocus
                                            />
                                            {adminError && <p className="text-xs text-red-500 mt-2 font-bold">{adminError}</p>}
                                        </div>
                                        <button type="submit" className="w-full bg-gradient-to-r from-red-700 to-red-600 hover:from-red-600 hover:to-red-500 text-white font-bold py-3 rounded-xl shadow-lg shadow-red-900/20 transition-all active:scale-95">
                                            Buka FeriBoard
                                        </button>
                                    </form>
                                </div>
                            </div>
                        )}
                    </div>
                );
            }

            // --- MAIN APP UI ---
            return (
                <div className="min-h-screen bg-slate-950 text-slate-200 font-sans flex flex-col md:flex-row">
                    
                    {/* SIDEBAR (Desktop) */}
                    <aside className="hidden md:flex flex-col w-64 h-screen fixed left-0 top-0 bg-slate-900 border-r border-slate-800 z-50">
                        <div className="p-6 flex items-center gap-3 border-b border-slate-800">
                            <div className={`w-10 h-10 bg-gradient-to-tr from-${currentData.themeColor}-600 to-${currentData.themeColor}-400 rounded-xl flex items-center justify-center shadow-lg`}>
                                <span className="text-xl font-bold text-white">Œî</span>
                            </div>
                            <div>
                                <h1 className="font-bold text-white text-lg leading-none">DeltaMath</h1>
                                <span className="text-[10px] text-slate-400 uppercase tracking-wider">Vokasi</span>
                            </div>
                        </div>

                        <nav className="flex-1 p-4 space-y-2 overflow-y-auto">
                            <button onClick={() => setActiveTab('dashboard')} className={`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${activeTab === 'dashboard' ? `bg-${currentData.themeColor}-500/10 text-${currentData.themeColor}-400 border border-${currentData.themeColor}-500/20` : 'text-slate-400 hover:bg-slate-800 hover:text-white'}`}>
                                <Menu className="w-5 h-5" />
                                <span className="font-medium text-sm">Beranda</span>
                            </button>
                            {/* Updated Menu Item 2 */}
                            <button onClick={() => setActiveTab('teacher')} className={`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${activeTab === 'teacher' ? `bg-${currentData.themeColor}-500/10 text-${currentData.themeColor}-400 border border-${currentData.themeColor}-500/20` : 'text-slate-400 hover:bg-slate-800 hover:text-white'}`}>
                                <GraduationCap className="w-5 h-5" />
                                <span className="font-medium text-sm">Profil Guru</span>
                            </button>
                            <button onClick={() => callGeminiAPI('concept')} className={`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${activeTab === 'chat' ? `bg-indigo-500/10 text-indigo-400 border border-indigo-500/20` : 'text-slate-400 hover:bg-slate-800 hover:text-white'}`}>
                                <MessageSquare className="w-5 h-5" />
                                <span className="font-medium text-sm">Tanya AI</span>
                            </button>
                            {/* Updated Menu Item 4 */}
                            <button onClick={() => setActiveTab('announcements')} className={`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${activeTab === 'announcements' || (isTourActive && tourStep === 4) ? `bg-${currentData.themeColor}-500/10 text-${currentData.themeColor}-400 border border-${currentData.themeColor}-500/20 ${getHighlightClass(4)}` : 'text-slate-400 hover:bg-slate-800 hover:text-white'}`}>
                                <Bell className="w-5 h-5" />
                                <span className="font-medium text-sm">Pengumuman</span>
                            </button>
                        </nav>

                        <div className="p-4 border-t border-slate-800 bg-slate-900/50">
                            <div className="flex items-center gap-3 mb-3">
                                <div className="w-10 h-10 rounded-full bg-slate-700 border border-slate-600 flex items-center justify-center text-slate-300">
                                    <User className="w-5 h-5" />
                                </div>
                                <div className="flex-1 overflow-hidden">
                                    <p className="text-sm font-bold text-white truncate">{userName}</p>
                                    <div className="flex items-center justify-between">
                                        <p className="text-xs text-slate-500 truncate">{userClass}</p>
                                        <button onClick={() => startTour()} className="text-xs text-indigo-400 hover:text-indigo-300" title="Ulangi Tur">
                                            <HelpCircle className="w-4 h-4" />
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <button onClick={() => setIsLoggedIn(false)} className="w-full flex items-center justify-center gap-2 py-2 rounded-lg bg-slate-800 text-slate-400 text-xs hover:bg-red-900/20 hover:text-red-400 transition-colors">
                                <LogOut className="w-3 h-3" /> Keluar
                            </button>
                        </div>
                    </aside>

                    {/* MAIN CONTENT */}
                    <main className="flex-1 w-full md:ml-64 min-h-screen bg-slate-950 relative flex flex-col">
                        
                        {/* MOBILE NAVBAR */}
                        <div className="md:hidden absolute top-0 w-full z-20 p-4 flex justify-between items-center bg-gradient-to-b from-black/80 to-transparent">
                            <div className="flex items-center gap-2">
                                <span className={`text-${currentData.themeColor}-500 font-bold text-xl drop-shadow-md`}>Œî</span>
                                <span className="font-bold text-sm tracking-wide drop-shadow-md text-white">DeltaMath</span>
                            </div>
                            {/* Mobile Menu Right */}
                            <div className="flex gap-3">
                                <div className={`md:hidden ${getHighlightClass(1)}`}>
                                    <select 
                                        className="bg-black/50 text-white text-xs border border-white/30 rounded px-2 py-1 focus:outline-none max-w-[100px]"
                                        value={selectedTopic}
                                        onChange={(e) => setSelectedTopic(e.target.value)}
                                    >
                                        {getTopicsList().map(t => <option key={t} value={t}>{t}</option>)}
                                    </select>
                                </div>
                                <div className="w-8 h-8 rounded-md bg-white/10 backdrop-blur-md border border-white/20 flex items-center justify-center">
                                    <User className="w-4 h-4 text-white" />
                                </div>
                            </div>
                        </div>

                        {/* DESKTOP TOP BAR (View Switcher + Topic) */}
                        <div className="hidden md:flex justify-between items-center p-6 border-b border-slate-800/50 bg-slate-900/50 backdrop-blur-sm sticky top-0 z-30">
                            <div>
                                <h2 className="text-lg font-bold text-white">Dashboard Belajar</h2>
                                <p className="text-xs text-slate-400">Selamat datang, {userName}</p>
                            </div>
                            <div className="flex items-center gap-4">
                                {/* View Switcher */}
                                <div className="flex bg-slate-800 rounded-lg p-1 border border-slate-700">
                                    <button 
                                        onClick={() => setViewMode('stream')}
                                        className={`p-2 rounded-md transition-all flex items-center gap-2 text-xs font-bold ${viewMode === 'stream' ? 'bg-slate-700 text-white shadow' : 'text-slate-400 hover:text-white'}`}
                                        title="Mode Stream (Netflix)"
                                    >
                                        <LayoutGrid className="w-4 h-4" /> Stream
                                    </button>
                                    <button 
                                        onClick={() => setViewMode('kanban')}
                                        className={`p-2 rounded-md transition-all flex items-center gap-2 text-xs font-bold ${viewMode === 'kanban' ? 'bg-indigo-600 text-white shadow' : 'text-slate-400 hover:text-white'}`}
                                        title="Mode Proyek (Kanban)"
                                    >
                                        <LayoutList className="w-4 h-4" /> Proyek
                                    </button>
                                </div>

                                {/* Topic Selector */}
                                <div className={`relative group ${getHighlightClass(1)}`}>
                                     <div className="flex items-center gap-2 bg-slate-800 border border-slate-700 rounded-lg px-4 py-2 cursor-pointer hover:bg-slate-700 transition-all">
                                        <BookOpen className="w-4 h-4 text-indigo-400"/>
                                        <span className="text-sm font-bold text-white max-w-[150px] truncate">{selectedTopic}</span>
                                        <ChevronDown className="w-4 h-4 text-slate-400"/>
                                     </div>
                                     <div className="absolute right-0 top-full mt-2 w-64 bg-slate-900 border border-slate-700 rounded-xl shadow-xl overflow-hidden hidden group-hover:block animate-fadeIn z-50">
                                        <div className="max-h-64 overflow-y-auto p-2">
                                           <p className="text-[10px] text-slate-400 font-bold uppercase tracking-wider px-2 py-1 sticky top-0 bg-slate-900">Materi Kelas {selectedLevel}</p>
                                           {getTopicsList().map((topic) => (
                                             <button 
                                               key={topic}
                                               onClick={() => setSelectedTopic(topic)}
                                               className={`w-full text-left px-3 py-2 text-sm rounded-lg transition-colors ${selectedTopic === topic ? `bg-${currentData.themeColor}-600 text-white` : 'text-slate-300 hover:bg-slate-800'}`}
                                             >
                                               {topic}
                                             </button>
                                           ))}
                                        </div>
                                     </div>
                                </div>
                            </div>
                        </div>

                        {/* RENDER CONTENT BASED ON VIEW MODE */}
                        {renderContent()}

                    </main>

                    {/* AI MODAL POPUP */}
                    {showAIModal && (
                        <div className="fixed inset-0 z-[100] flex items-end sm:items-center justify-center px-4 py-6 bg-black/80 backdrop-blur-sm animate-fadeIn">
                            <div className="w-full max-w-2xl bg-slate-900 border border-slate-700 rounded-2xl shadow-2xl flex flex-col max-h-[85vh] overflow-hidden">
                                <div className="p-4 border-b border-slate-800 flex justify-between items-center bg-slate-900 sticky top-0">
                                    <div className="flex items-center gap-3">
                                        <div className="p-2 bg-indigo-600 rounded-lg">
                                            <Sparkles className="w-5 h-5 text-white" />
                                        </div>
                                        <div>
                                            <h3 className="text-base font-bold text-white">
                                                {aiPromptType === 'concept' ? 'Guru AI: Penjelasan Konsep' : 'Mentor AI: Panduan Proyek'}
                                            </h3>
                                            <p className="text-xs text-slate-400">Powered by Gemini AI</p>
                                        </div>
                                    </div>
                                    <button onClick={() => setShowAIModal(false)} className="p-2 hover:bg-slate-800 rounded-full text-slate-400 transition-colors">
                                        <CloseIcon className="w-5 h-5" />
                                    </button>
                                </div>
                                <div className="p-6 overflow-y-auto">
                                    {aiLoading ? (
                                        <div className="flex flex-col items-center justify-center py-12 space-y-4">
                                            <div className="w-10 h-10 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin"></div>
                                            <p className="text-sm text-indigo-300 animate-pulse font-medium">Sedang memikirkan jawaban terbaik...</p>
                                        </div>
                                    ) : (
                                        <div className="prose prose-invert prose-sm md:prose-base max-w-none">
                                            <div className="text-slate-300 whitespace-pre-line leading-relaxed">
                                                {aiResponse}
                                            </div>
                                        </div>
                                    )}
                                </div>
                                {!aiLoading && (
                                    <div className="p-4 border-t border-slate-800 bg-slate-900/50 flex justify-end">
                                        <button 
                                            onClick={() => setShowAIModal(false)}
                                            className="px-6 py-2.5 bg-slate-800 hover:bg-slate-700 text-sm font-bold text-slate-300 rounded-lg transition-colors border border-slate-700"
                                        >
                                            Tutup
                                        </button>
                                    </div>
                                )}
                            </div>
                        </div>
                    )}

                    {/* ACTIVITY CONTENT MODAL (NEW) */}
                    {showActivityModal && activityContent && (
                        <div className="fixed inset-0 z-[100] flex items-end sm:items-center justify-center px-4 py-6 bg-black/90 backdrop-blur-md animate-fadeIn">
                            <div className="w-full max-w-lg bg-slate-900 border border-slate-700 rounded-2xl shadow-2xl flex flex-col overflow-hidden relative">
                                {/* Header Image Placeholder */}
                                <div className={`h-24 w-full bg-gradient-to-r from-${currentData.themeColor}-900 to-slate-900 flex items-center justify-center`}>
                                    {activityContent.icon}
                                </div>
                                
                                <div className="p-6">
                                    <div className="mb-4">
                                        <span className={`text-[10px] font-bold uppercase tracking-widest text-${currentData.themeColor}-400 mb-1 block`}>
                                            Aktivitas {activeDeltaStage}
                                        </span>
                                        <h3 className="text-2xl font-bold text-white">{activityContent.title}</h3>
                                    </div>
                                    
                                    <div className="prose prose-invert text-sm text-slate-300 whitespace-pre-line leading-relaxed mb-6">
                                        {activityContent.body}
                                    </div>

                                    <button 
                                        onClick={() => setShowActivityModal(false)}
                                        className={`w-full py-3.5 rounded-xl font-bold text-white bg-${currentData.themeColor}-600 hover:bg-${currentData.themeColor}-500 shadow-lg shadow-${currentData.themeColor}-900/20 transition-all active:scale-95 flex items-center justify-center gap-2`}
                                    >
                                        {activityContent.actionText} <CheckCircle2 className="w-4 h-4"/>
                                    </button>
                                </div>

                                <button onClick={() => setShowActivityModal(false)} className="absolute top-4 right-4 p-2 bg-black/20 hover:bg-black/40 rounded-full text-white/70 hover:text-white transition-colors">
                                    <CloseIcon className="w-5 h-5" />
                                </button>
                            </div>
                        </div>
                    )}

                    {/* TOUR GUIDE OVERLAY (NEW) */}
                    {isTourActive && <TourOverlay />}

                    {/* ADMIN BUTTON (FLOATING MAIN APP) */}
                    <button
                        onClick={() => setShowAdminModal(true)}
                        className={`fixed bottom-20 right-4 md:bottom-8 md:right-8 z-[150] p-3 bg-red-600/90 hover:bg-red-500 text-white rounded-full shadow-lg border border-red-400/50 transition-all hover:scale-110 flex items-center justify-center group`}
                        title="Akses FeriBoard"
                    >
                        <Globe className="w-5 h-5 group-hover:animate-spin" />
                    </button>

                    {/* ADMIN MODAL (MAIN APP) */}
                    {showAdminModal && (
                        <div className="fixed inset-0 z-[201] flex items-center justify-center px-4 bg-black/80 backdrop-blur-sm animate-fadeIn">
                            <div className="bg-slate-900 border border-slate-700 p-6 rounded-2xl shadow-2xl w-full max-w-sm relative">
                                <button 
                                    onClick={() => setShowAdminModal(false)} 
                                    className="absolute top-4 right-4 text-slate-400 hover:text-white"
                                >
                                    <CloseIcon className="w-5 h-5"/>
                                </button>
                                
                                <div className="flex items-center gap-3 mb-6">
                                    <div className="p-2 bg-red-900/50 rounded-lg border border-red-500/30">
                                        <Lock className="w-5 h-5 text-red-500"/> 
                                    </div>
                                    <div>
                                        <h3 className="font-bold text-white text-lg">Admin Access</h3>
                                        <p className="text-xs text-slate-400">Restricted Area</p>
                                    </div>
                                </div>
                                
                                <form onSubmit={handleAdminAccess} className="space-y-4">
                                    <div>
                                        <label className="text-xs font-bold text-slate-500 uppercase mb-1 block">Password</label>
                                        <input 
                                            type="password" 
                                            className={`w-full bg-slate-800 border ${adminError ? 'border-red-500 animate-pulse' : 'border-slate-700'} rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-red-500 transition-all`}
                                            placeholder="Enter access code..."
                                            value={adminPassword}
                                            onChange={(e) => setAdminPassword(e.target.value)}
                                            autoFocus
                                        />
                                        {adminError && <p className="text-xs text-red-500 mt-2 font-bold">{adminError}</p>}
                                    </div>
                                    <button type="submit" className="w-full bg-gradient-to-r from-red-700 to-red-600 hover:from-red-600 hover:to-red-500 text-white font-bold py-3 rounded-xl shadow-lg shadow-red-900/20 transition-all active:scale-95">
                                        Buka FeriBoard
                                    </button>
                                </form>
                            </div>
                        </div>
                    )}

                    {/* BOTTOM NAV (MOBILE ONLY) */}
                    <nav className="md:hidden fixed bottom-0 w-full bg-[#121212] border-t border-slate-800/50 p-2 pb-4 z-40">
                        <div className="flex justify-around items-center">
                            <button className={`p-2 flex flex-col items-center gap-1 ${activeTab === 'dashboard' ? 'text-white' : 'text-slate-600'}`} onClick={() => setActiveTab('dashboard')}>
                                <Menu className="w-5 h-5" />
                                <span className="text-[9px] font-medium">Beranda</span>
                            </button>
                            {/* Updated Mobile Menu Item 2 */}
                            <button className={`p-2 flex flex-col items-center gap-1 ${activeTab === 'teacher' ? 'text-white' : 'text-slate-600'}`} onClick={() => setActiveTab('teacher')}>
                                <GraduationCap className="w-5 h-5" />
                                <span className="text-[9px] font-medium">Profil</span>
                            </button>
                            <button className={`p-2 flex flex-col items-center gap-1 ${activeTab === 'chat' ? 'text-indigo-400' : 'text-slate-600'}`} onClick={() => callGeminiAPI('concept')}>
                                <MessageSquare className="w-5 h-5" />
                                <span className="text-[9px] font-medium">Tanya AI</span>
                            </button>
                            {/* Updated Mobile Menu Item 4 */}
                            <button className={`p-2 flex flex-col items-center gap-1 ${activeTab === 'announcements' || (isTourActive && tourStep === 4) ? `text-white ${getHighlightClass(4)}` : 'text-slate-600'}`} onClick={() => setActiveTab('announcements')}>
                                <Bell className="w-5 h-5" />
                                <span className="text-[9px] font-medium">Pengumuman</span>
                            </button>
                        </div>
                    </nav>
                </div>
            );
        };

        const root = createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
